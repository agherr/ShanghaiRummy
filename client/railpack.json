{
  "$schema": "https://schema.railpack.com",
  "provider": "node",
  "packages": {
    "node": "20",
    "pnpm": "9"
  },
  "steps": {
    "install": {
      "commands": [
        { "src": "package.json", "dest": "package.json" },
        { "src": "pnpm-lock.yaml", "dest": "pnpm-lock.yaml" },
        { "src": "pnpm-workspace.yaml", "dest": "pnpm-workspace.yaml" },
        { "src": "shared", "dest": "shared" },
        { "src": "client", "dest": "client" },
        { "cmd": "pnpm install --frozen-lockfile", "customName": "Install dependencies" }
      ]
    },
    "build": {
      "inputs": [{ "step": "install" }],
      "commands": [
        { "cmd": "pnpm --filter @shanghairummy/shared build", "customName": "Build shared package" },
        { "cmd": "pnpm --filter @shanghairummy/client build", "customName": "Build client" }
      ]
    }
  },
  "deploy": {
    "inputs": [{ "step": "build", "include": ["client/dist"] }],
    "startCommand": "npx serve -s client/dist -l 3000"
  }
}
